env:
  CGO_ENABLED: 0

build:
  tasks:
    - name: build Go binary
      wd: ./cryptdatum/cmd/cryptdatum
      commands:
        - go build -o $CDT_BUILD_DIR/bin/cryptdatum .
      outputs:
        - $CDT_BUILD_DIR/bin/cryptdatum
tests:
  tasks:
    - name: test go library
      wd: ./cryptdatum
      commands:
        - go test -cover ./...

binary:
  bin: $CDT_BUILD_DIR/bin/cryptdatum
  commands:
    - file-has-header
    - file-has-valid-header
    - file-has-invalid-header
    - file-info